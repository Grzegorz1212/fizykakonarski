<!DOCTYPE html>
<html>
<head>
    <title>Fizyka Konarski</title>

    <style>
        /* CSS to style the table and bold text */
        table {
            border-collapse: collapse;
            width: 100%;
        }
        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: center;
        }
        /* Style to make the text in the second column bold */
        tr:nth-child(1) {
            font-weight: bold;
            font-size: 20px;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <h1>Witaj na stronie nauczyciela fizyki w XLIV LO im. ks. Stanis≈Çawa Konarskiego w Krakowie.</h1>
    <div id="classSelection">
        <label>Wybierz klase. </label>
        <!-- Buttons for different classes -->
        <button type="button" onclick="fetchClassData('klasa1A')">Klasa1A</button>
        <button type="button" onclick="fetchClassData('klasa2A')">Klasa2A</button>
        <button type="button" onclick="fetchClassData('klasa3A')">Klasa3A</button>
        <button type="button" onclick="fetchClassData('klasa4A')">Klasa4A</button>
    </div>

    <!-- Div area to display table data -->
    <div id="classData" class="hidden">
        <p id="classTitle"></p>
        <div id="classTable"></div>
        <button type="button" onclick="showHomeSection()">Powrot</button>
    </div>
    
    <script>

        function fetchClassData(className) {
            fetch(className + '.json') // Fetch the respective JSON file based on the className
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    // Display the class data in an HTML table
                    const classTableDiv = document.getElementById("classTable");
                    classTableDiv.innerHTML = createTableFromData(data);

                    // Update the class title
                    document.getElementById("classTitle").textContent = className;
                })
                .catch(error => {
                    console.error('Error fetching data:', error);
                });

            // Display the div after fetching the data
            document.getElementById("classData").classList.remove("hidden");
            document.getElementById("classSelection").classList.add("hidden");
        }

        
        // Function to create an HTML table from JSON data
        function createTableFromData(data) {
            let tableHTML = '<table border="1">';
            // Assuming the first object in the data array contains column headers
            tableHTML += '<tr>';
            Object.keys(data[0]).forEach(key => {
                tableHTML += '<th>' + key + '</th>';
            });
            tableHTML += '<th>Procent</th>'; // Add a header for the new column
            tableHTML += '</tr>';

            // Adding rows to the table
            data.forEach(obj => {
                tableHTML += '<tr>';
                Object.values(obj).forEach(value => {
                    tableHTML += '<td>' + value + '</td>';
                });
                const sum = calculateSumForRow(obj); // Perform your calculation here
                tableHTML += '<td>' + sum + '</td>'; // Add the calculated value to the table
                tableHTML += '</tr>';
            });

            tableHTML += '</table>';
            return tableHTML;
        }
        // Function to calculate sum of all numeric values in a row
        function calculateSumForRow(obj) {
            const values = Object.values(obj).filter(val => !isNaN(Number(val))); // Get numeric values
            const sum = values.reduce((acc, curr) => acc + Number(curr), 0); // Calculate sum
            sum -= Number(obj['Numer']) + Number(obj['Plusy']);
            return sum;
        }
        
        function showHomeSection() {
             // Hide the button section
            document.getElementById("classData").classList.add("hidden");
            // Display the home section
            document.getElementById("classSelection").classList.remove("hidden");
        }

    </script>

</body>
</html>
